:javascript
  $(function() {
    $('#dataTable').DataTable({
      paging: true,
      searching: true,
      ordering: true,
      language: {
        search: 'Buscar',
        paginate: {
          first: 'Primero',
          previous: 'Anterior',
          next: 'Siguiente',
          last: 'Ãšltimo'
        },
        info: 'Mostrando _START_ de _END_ registros',
        lengthMenu: 'Mostrar _MENU_ registros'
      },
      "footerCallback": function (row, data, start, end, display) {
        var api = this.api(),
        intVal = function (i) {
              return typeof i === 'string' ?
                   i.replace(/[, Rs]|(\.\d{2})/g,"")* 1 :
                   typeof i === 'number' ?
                   i : 0;
        },
        total2 = api
            .column(4)
            .data()
            .reduce(function (a, b) {
                return intVal(a) + intVal(b);
            }, 0);
  
         $(api.column(4).footer()).html(
            '  Q.' + total2
         );
      }
    });
  });

- model_class = TransactionDetail
- content_for :title, model_class.model_name.human.pluralize(I18n.locale).titleize

- unless notice.nil?
  = bootstrap_notice(notice, alert.nil? ? 'success' : 'danger')

= render 'parent', transaction: @transaction, action: t('helpers.titles.new', model: model_class.model_name.human)
= bootstrap_card t('.title', :default => t('general.list', model: model_class.model_name.human.pluralize(I18n.locale))) do
  .table-responsive
    %table#dataTable.table.table-bordered{:cellspacing => "0", :width => "100%"}
      %thead
        %tr
          %th= model_class.human_attribute_name(:transaction)
          %th= model_class.human_attribute_name(:product)  
          %th= model_class.human_attribute_name(:unit_price)
          %th= model_class.human_attribute_name(:quantity)
          %th= model_class.human_attribute_name(:total)
          %th
      %tfoot
        %tr
          %th{colspan: 3}
          %th= model_class.human_attribute_name(:total).upcase
          %th 
      %tbody
        - @transaction_details.each do |transaction_detail|
          %tr
            %td= transaction_detail.my_transaction.id
            %td= transaction_detail.product.description
            %td= transaction_detail.unit_price
            %td= transaction_detail.quantity
            %td= transaction_detail.total
            %td
              - if @transaction.open?('SALE')
                = bootstrap_button('warning', t('helpers.links.edit', model: model_class.model_name.human), 'exclamation-triangle', edit_transaction_transaction_detail_path(@transaction, transaction_detail))
                = link_to '<i class="fa fa-plus"></i>'.html_safe + t('helpers.links.destroy'), transaction_transaction_detail_path(@transaction, transaction_detail), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-sm btn-danger"

    %br/
    - if @transaction.open?('SALE')
      = bootstrap_button('primary', t('general.add_products'), 'plus', new_transaction_transaction_detail_path)
      = bootstrap_button('success', t('general.close_order'), 'check', transaction_close_order_path(@transaction), 'post')
    - else
      - if @transaction.status.parent.nil?
        = bootstrap_button('primary disabled', t('general.change_status', status: @transaction.status.description), 'arrow-right', nil, 'post')
        = bootstrap_button('primary', t('helpers.links.back'), 'fa-arrow', transactions_path)
      - else
        = bootstrap_button('primary', t('general.change_status', status: @transaction.status.parent.description), 'arrow-right', transaction_change_status_path(@transaction), 'post')
        = bootstrap_button('primary', t('helpers.links.back'), 'fa-arrow', transactions_path)
    - if current_dealer.admin? 
      =# bootstrap_button('warning', t('general.return', status: @transaction.status.parent.description), 'arrow-right', transaction_change_status_path)