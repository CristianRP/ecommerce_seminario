:javascript
  $(function() {
    const selectProduct = $('#transaction_detail_product_id')
    selectProduct.select2();
    selectProduct.on('change', function() {
      const selectedItem = selectProduct.find(':selected');
      console.log(selectProduct.find(':selected'));
      console.log(selectedItem.val());
      $.get('/products/'+ selectedItem.val(), function(data) {
        console.log(data);
        $('#transaction_detail_unit_price').val(data.price);
      }, 'json');
      $('#transaction_detail_total').val('');
    });
    const inputQuantity = $('#transaction_detail_quantity')
    inputQuantity.keyup(function() {
      var unitPrice = $('#transaction_detail_unit_price').val();
      var quantity = inputQuantity.val();
      var total = unitPrice * quantity;
      $('#transaction_detail_total').val(total);
    });
  });

= form_for [transaction, transaction_detail] do |f|
  - if @transaction_detail.errors.any?
    #error_explanation
      %h2= "#{pluralize(@transaction_detail.errors.count, "error")} prohibited this transaction_detail from being saved:"
      %ul
        - @transaction_detail.errors.full_messages.each do |message|
          %li= message
  .form-group
    = f.label :product_id
    = f.collection_select :product_id, Product.all, :id, :description, { prompt: true }, { class: 'form-control' }
  .form-group
    = f.label :unit_price
    = f.text_field :unit_price, class: 'form-control', disabled: true
  .form-group
    = f.label :quantity
    = f.number_field :quantity, class: 'form-control', step: :any, 'data-parsley-type': :number
  .form-group
    = f.label :total
    = f.number_field :total, class: 'form-control', step: :any, 'data-parsley-type': :number, disabled: true
  .actions
    = f.submit 'Save'
